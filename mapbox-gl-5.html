<!DOCTYPE html>
<html>

<head>
    <meta charset='utf-8' />
    <title>Commute Patterns</title>
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
    <script src='https://mapbox-gl-inspect.lukasmartinelli.ch/dist/mapbox-gl-inspect.min.js'></script>
    <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.54.0/mapbox-gl.js'></script>
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.54.0/mapbox-gl.css' rel='stylesheet' />
    <style>
        body {
            margin: 0;
            padding: 0;
        }

        #map {
            position: absolute;
            top: 0;
            bottom: 0;
            width: 100%;
        }
    </style>
</head>

<body>


    <div id='map'></div>

    <script>
        mapboxgl.accessToken =
            'pk.eyJ1IjoibWRjcnVzZSIsImEiOiJjanZvN25kaHQxdzAxNDhwZjM4NDNvMXV4In0.s4GSawMNB7Jo4Vf7LXKEew';
        var map = new mapboxgl.Map({
            container: 'map',
            style: 'mapbox://styles/mapbox/dark-v10',
            center: [-98, 38],
            zoom: 4
        });
        map.on('load', function () {
        // CA Layer
            map.addSource('06-6e89ef', {
                type: 'vector',
                url: 'mapbox://mdcruse.b3jn4okr'
            });
            map.addLayer({
                'id': '06-6e89ef',
                'type': 'line',
                'source': '06-6e89ef',
                'layout': {
                  'visibility': 'visible' 
                },
                'paint': {
                    'line-color': [
                        'case', ['>=', ['number',['get','distance']], 50000], 'red', 
                          ['case', ['>=', ['number',['get','distance']], 30000], 'yellow', 
                          ['case', ['<', ['number',['get','distance']], 30000], 'white','green']],
                    ],
                    'line-opacity': .05,
                },
                'source-layer': '06',
            });
        // KY Layer
            map.addSource('out-26o3t2', {
                type: 'vector',
                url: 'mapbox://mdcruse.9cievwvx'
            });
            map.addLayer({
                'id': 'ky_lines',
                'type': 'line',
                'source': 'out-26o3t2',
                'layout': {
                   'visibility': 'visible'
                 },
                "paint": {
                    'line-color': [
                        'case', ['>=', ['number',['get','distance']], 50000], 'red', 
                          ['case', ['>=', ['number',['get','distance']], 30000], 'yellow', 
                          ['case', ['<', ['number',['get','distance']], 30000], 'white','gray']],
                    ],
                    'line-opacity': [
                        'case', ['>=', ['number',['get','distance']], 50000], .03, 
                          ['case', ['>=', ['number',['get','distance']], 30000], .09, 
                          ['case', ['<', ['number',['get','distance']], 30000], .13,.001]],
                    ],
                },
                'source-layer': '21',
            });
   
        });  // end of map.on load


        //var features = map.queryRenderedFeatures({layers:['ky_lines']});
        var f = function (e) {
            var features = map.queryRenderedFeatures(e.point, {
            layers: ['21']
            });
            console.log('here');

        }

/*
                    'curve',['step'],['number', ['get', 'distance'], 1], "#FFEDA0", 30000, "#FED976", 80000, "#FEB24C"
                    ],
*/
map.addControl(new MapboxInspect());
</script>

</body>

</html>