<!doctype html>
<html lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
    integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.4.0/dist/leaflet.css" />

  <title>Hello, world!</title>
  <style>
    #map {
      width: 95%;
      position: absolute;
      top: 40px;
      left: 40px;
      bottom: 0;
      background: #343a40;
    }


  </style>
</head>

<body>

<div id="map"></div>
  <script src="https://unpkg.com/leaflet@1.4.0/dist/leaflet.js"></script>
  
<!-- Load d3.js and the geo projection plugin -->
<script src="https://d3js.org/d3.v5.js"></script>
<script src="https://d3js.org/d3-geo-projection.v2.min.js"></script>


<script>
    var map = L
        .map('map')
        .setView([37.6, -85.5], 7)
        .setMaxZoom(12)
        .setMinZoom(4);


    // add labels & tiles to the map
    map.createPane('labels');
    map.getPane('labels').style.zIndex = 650;
    map.getPane('labels').style.pointerEvents = 'none';

    L.tileLayer('http://{s}.basemaps.cartocdn.com/dark_only_labels/{z}/{x}/{y}.png', {
        attribution: '©OpenStreetMap, ©Carto',
        pane: 'labels'
    }).addTo(map);

    // Add a svg layer to the map
    L.svg().addTo(map);

    
    var points = [
        {lat: 37.011, long: -85.907, achieve: 0.34},
        {lat: 38.983, long: -84.626, achieve: 0.67},
        {lat: 37.727, long: -87.083, achieve: 0.59},
        {lat: 37.999, long: -84.439, achieve: 0.32},
        {lat: 37.959, long: -84.369, achieve: 0.97}
    ];

// Select the svg area and add circles:
d3.select("#map")
  .select("svg")
  .selectAll("myCircles")
  .data(points)
  .enter()
  .append("circle")
    .attr("cx", function(d){ return map.latLngToLayerPoint([d.lat, d.long]).x })
    .attr("cy", function(d){ return map.latLngToLayerPoint([d.lat, d.long]).y })
    .attr("r", 5)
    .style("fill", "red")
    .attr("stroke", "red")
    .attr("stroke-width", 3)
    .attr("fill-opacity", .4)

// Function that update circle position if something change
function update() {
  d3.selectAll("circle")
    .attr("cx", function(d){ return map.latLngToLayerPoint([d.lat, d.long]).x })
    .attr("cy", function(d){ return map.latLngToLayerPoint([d.lat, d.long]).y })
}

// If the user change the map (zoom or drag), I update circle position:
map.on("moveend", update)

</script>
</body>

</html>
