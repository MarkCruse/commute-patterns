<!DOCTYPE html>
<html>
<head>

	<title>VectorGrid.Protobuf example</title>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="https://unpkg.com/leaflet@1.0.3/dist/leaflet.css" />

</head>
<body style='margin:0'>

	<div id="map" style="width: 100vw; height: 100vh; background: rgb(15, 15, 15)"></div>
	
	<script type="text/javascript"  src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js"></script>
	<script type="text/javascript"  src="https://unpkg.com/leaflet.vectorgrid@1.2.0"></script>
	<!-- <script type="text/javascript" src="../dist/Leaflet.VectorGrid.bundled.js"></script> -->
	<script>
    
// **** Options for various layers 
// If displaying all lines with not highlight for distance
var lineOptions = {
    fillOpacity: 0,
    color: '#c7dffc', //lt blue
    opacity: .4,
    weight: 0.4
};

// Short commute distance
var shortCommuteOptions = {
    color: 'white',
    weight: .5,
    opacity: 2
}

var mediumCommuteOptions = {
    color: 'yellow',
    weight: .2,
    opacity: 0.4
}

var longCommuteOptions = {
    color: 'red',
    weight: .2,
    opacity: 0.2
}

		var map = L.map('map');
 		var cartodbAttribution = '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, &copy; <a href="http://cartodb.com/attributions">CartoDB</a>'
		var mapboxUrl = "https://b.tiles.mapbox.com/v4/mdcruse.6m2upoi2/{z}/{x}/{y}.vector.pbf?access_token={token}";
        distance = 0;
		var vectorTileOptions = {
			rendererFactory: L.canvas.tile,
			attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, &copy; <a href="https://www.mapbox.com/about/maps/">MapBox</a>',
            interactive: true,
            getFeatureId: function(feature) {
                properties = feature.properties;
                distance = properties.distance;
                console.log(distance);
                return distance;
            },	
            vectorTileLayerStyles: {
                'age1_1k15k_1560_miles': {
                    fillOpacity: 1,
                    color: 'orange', 
                    opacity: .4,
                    weight: 1
                }
            },
			token: 'pk.eyJ1IjoibWRjcnVzZSIsImEiOiJjanZvN25kaHQxdzAxNDhwZjM4NDNvMXV4In0.s4GSawMNB7Jo4Vf7LXKEew'


		};
		var mapboxPbfLayer = L.vectorGrid.protobuf(mapboxUrl, vectorTileOptions);
        map.setView({ lat: 38.5, lng: -97.2 }, 5); //U.S.
        tile_layer = L.vectorGrid.protobuf(mapboxUrl, vectorTileOptions).addTo(map);


	</script>
</body>
</html>

