
<!DOCTYPE html>
<html lang="en">
<!-- default layout-->
<!--map layout see _layouts/map.html-->

<head>
  <!--meta content and open graph tags for social sharing see _includes/metal.html-->
  <title>Scott Township Parcel Map</title>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />

  <!-- <link href='//fonts.googleapis.com/css?family=Montserrat:400,700|Open+Sans:400italic,400,800,700|Archivo+Narrow:400,700|Archivo+Black' rel='stylesheet' type='text/css'>-->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.9.1/jquery.min.js" integrity="sha256-wS9gmOZBqsqWxgIVgA8Y9WcQOa7PgSIX+rPA0VL2rbQ="
    crossorigin="anonymous"></script>

  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
  <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
   <!--  <link href="assets/css/leaflet-panel-layers.min.css" rel="stylesheet"> -->

  <!-- <script src="https://maps.google.com/maps/api/js?v=3"></script> -->
  <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet">

  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.0.0/dist/leaflet.css" />
  <script type="text/javascript" src="https://unpkg.com/leaflet@1.0.0/dist/leaflet.js"></script>
 <script type="text/javascript" src="https://unpkg.com/leaflet.vectorgrid@1.2.0"></script>

  <!-- <link rel="stylesheet" href="https://unpkg.com/leaflet@1.2.0/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.2.0/dist/leaflet.js"></script> -->

  <link rel="stylesheet" href="assets/css/custom-leaflet-0.7.css" />
  
  <script src="assets/js/custom-leaflet-0.7.js"></script>
    <script src="assets/js/leaflet-panel-layers.js"></script>

  <link rel="stylesheet" href="assets/css/custom-ui.css" />

  <style>
    * {
      font-family: "Open Sans", sans-serif;
    }
    hr {
      margin-top: 10px;
      margin-bottom: 10px;
    }
    
  </style>


</head>

<body>
  <!--
    <script src="assets/js/geojson-vt.js"></script>
  <script src="assets/js/L.CanvasTiles.js"></script>
  <script src="data/parcelstopo.json"></script>
  <script src="data/zoning.geojson"></script>
  <script src="data/floodplains.geojson"></script>
  <script src="data/muni.geojson"></script>
  <script src="data/wetlands.geojson"></script>
  <script src="data/buildingfootprints2007.geojson"></script>
  <script src="data/addresspoints.geojson"></script>
  -->
  <script src='https://api.mapbox.com/mapbox.js/plugins/leaflet-pip/v0.1.0/leaflet-pip.min.js'></script>

  <!-- <div class="blank"><h2 class="animate-flicker" style="text-align:center;margin-top:50px;">Loading...</h2></div> -->
  <div id='map'>
    <div id="sidebar">
      <h2 style="font-family:Archivo Black, sans-serif;">Scott Township</h2>
      <h3 style="font-family:Archivo Black, sans-serif;">Lackawanna County, Pa.</h3>
      <h5 style="font-family:Archivo Black, sans-serif;">
      Address: 1038 Montdale Rd. Scott Township PA 18447<br>
      Phone: 570-319-1296<br>
      Fax 570-319-1321<br>
      Hours: 9:00 A.M. â€“ 3:00 P.M., Monday through Friday<br>
      E-mail Address: Secretary@Scotttownship.org</span></h5>
      <hr />
      <strong>Use zoom controls to navigate the map. Pinch & zoom and double tap to zoom have been disabled.</strong>
      <hr />
      <em>The parcels shown are for informational purposes only. <br>Map data is only updated once or so per year.</em>

      <div>
        <hr />
        <button id="showTools" type="button" class="btn btn-default btn-xs btn-block">Show Map Tools Legend</button>
        <button id="hideTools" type="button" class="btn btn-default btn-xs btn-block" style="display:none;">Hide Map Tools Legend</button>
        <div class="toolLegend" style="display:none;">
          <hr />
          <div class="list-group" style="text-align:left;">
            <li class="list-group-item">
              <i class='fa fa-bars fa-fw fa-lg'></i> Open Sidebar</li>

            <li class="list-group-item">
              <i class='fa fa-exchange fa-fw fa-lg'></i> Toggle Address Search</li>

            <li class="list-group-item">
              <img src="assets/images/fullscreen-img.png" style="padding:0 1px;width:22px;"></img> Fullscreen</li>
            <li class="list-group-item">
              <i class='fa fa-globe fa-fw fa-lg'></i> Default Map Extent</li>
            <li class="list-group-item">
              <i class='fa fa-map-marker fa-fw fa-lg'></i> Show/Follow Your Location</li>

            <li class="list-group-item">
              <i class='fa fa-cogs fa-fw fa-lg'></i> Toggle Map Tools (Mobile Only)</li>
            <li class="list-group-item">
              <img src="assets/images/layers-bl.png" style="padding:0 1px;width:22px;"></img> Toggle Map Layers</li>

          </div>
        </div>
        <hr />
      </div>
      <script>
        $("#showTools").click(function () {
          $(".toolLegend").toggle();
          $("#showTools").toggle();
          $("#hideTools").toggle();
        });
        $("#hideTools").click(function () {
          $(".toolLegend").toggle();
          $("#showTools").toggle();
          $("#hideTools").toggle();
        });
      </script>

      <h6><a href='http://scotttownship.org' target='_blank' style='text-decoration:none;'>Scott Township</a> | Map data updated 11/2017.</h6>
      <h6><a href='https://lakedevelopmentgroup.com' target='_blank' style='text-decoration:none;'>By Lake Development Group, Inc</a> | 2016-2018.</h6>
    </div>
  </div>




  <script>
    var tileLayer;
    var zoning, floodplains;
/*    
    var map = L.map('map', {
      zoomControl: false,
      minZoom: 10,
      zoomAnimationThreshold: 2,
    }).setView([41.54186311882117, -75.6412124633789], 12);
*/
    
    var map = L.map('map', {
        renderer: L.canvas(),
        color: '#e0e0e0'
    }).setView([37, -100], 5).setMaxZoom(12).setMinZoom(3);

    //remove existing attribution control by hiding it only on mobile
    //make sure the normal control is hidden
    var style = document.createElement('style');
    style.type = 'text/css';
    style.innerHTML = '.leaflet-control-attribution {display: none;};@media screen and (max-width:768px) {.elevation.leaflet-control {display:none}}';
    document.getElementsByTagName('head')[0].appendChild(style);

    if (L.Browser.mobile) {

      var toggleAttribution = L.Control.extend({
        options: { position: 'bottomright' },
        onAdd: function (map) {
          this._div = L.DomUtil.create('button', 'btn btn-link');
          this._div.innerHTML = "Leaflet | Map Tiles";
          L.DomEvent.on(this._div, 'click', this._click);
          return this._div;
        },

        _click: function (e) {
          L.DomEvent.stop(e);
          x = document.getElementsByClassName("leaflet-control-attribution")[0];
          x.style.display = x.style.display === 'block' ? '' : 'block';
        },

      });
      map.addControl(new toggleAttribution());
    } else {
      x = document.getElementsByClassName("leaflet-control-attribution")[0];
      x.style.display = x.style.display === 'block' ? '' : 'block';
    }
    //Add link to edit OpenStreetMap at the current map location
    var osmEdit = L.geoJson();
    osmEdit.getAttribution = function () { return "<span id='osmEditLink'><a href='#'>Edit OSM</a></span>"; };
    osmEdit.addTo(map);
    function osmEditAdd() {
      var osmEditLink = document.getElementById('osmEditLink');
      osmEditLink.addEventListener('click', function () {
        var osmEditZoom = map.getZoom();
        var osmEditCenter = map.getCenter();
        //console.log(osmEditCenter);
        window.open("http://www.openstreetmap.org/#map=" + osmEditZoom + "/" + osmEditCenter.lat + "/" + osmEditCenter.lng + "&layers=N");
      });
    }
    document.onload = function () {
      setTimeout(function () { osmEditAdd() }, 5000);
    }
    //End Attribution Toggle
    //--begin map-tiles
    /*var ogrip = L.esri.imageMapLayer({
      url: '//geo.oit.ohio.gov/arcgis/rest/services/OSIP/osip_best_avail_1ft/ImageServer',
    });
    var ogripTiles = L.esri.tiledMapLayer({
      url:'//gis5.oit.ohio.gov/ArcGIS/rest/services/WM_OSIP_II/MapServer/3',
    });*/

    var osm = L.tileLayer('//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      maxNativeZoom: 19,
      maxZoom: 22,
      attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>',
    });


    var theScale = L.control.scale({ metric: false, imperial: true }).addTo(map);

    var baseLayers = [
      {
        active: true,
        name: "Open Street Map",
        layer: L.tileLayer('//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png')
      },
      {
        active: false,
        name: "Satellite",
        layer: L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}')
      },
      {
        active: false,
        name: "Topography",
        layer: L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}')
      }
    ];


    // var zoningStyle = {
    //   "color": "#ef1717",
    //   "weight": 2,
    //   "opacity": 0.65,
    //   fillOpacity: 0
    // };
    var muniStyle = {
      "color": "#000",
      "weight": 2,
      "opacity": 1,
      fillOpacity: 0
    };
    var floodplainStyle = {
      "color": "#178eef",
      "weight": 2,
      "opacity": 0.65,
      fillOpacity: 0.5,
      fillColor: '#abd3f4'
    };
    var wetlandsStyle = {
      "color": "#78808c",
      "weight": 1,
      "opacity": 0.65,
      fillOpacity: 0.5,
      fillColor: '#adafb2',
      fillRule: 'evenodd'
    };
    var addressptsStyle = {
      "color": "#37c132",
      "weight": 1,
      "opacity": 0.65
    };
    var buildingsStyle = {
      "color": "#c17e32",
      "weight": 1,
      "opacity": 0.65,
      fillOpacity: 0.5,
      fillColor: '#f4c997'      
    };
    /*
    var overLayers = [
      {
        active: false,
      	name: "Zoning",
        layer: L.geoJson(zoning, {
          style: function(feature) {
            return {
              weight: 2,
              opacity: 1,
              color: 'white',
              dashArray: '3',
              fillOpacity: getZoneOpacity(feature.properties.ZONE),
              fillColor: getZoneColor(feature.properties.ZONE)
            };                
            }
          , onEachFeature: onEachZoningFeature})
      }
      ,{
      	active: false,
      	name: "Floodplains",
      	layer: L.geoJson(floodplains, {style: floodplainStyle})
      }
      ,{
      	active: false,
      	name: "Municipal Boundary",
      	layer: L.geoJson(muni, {style: muniStyle})
      }
      ,{
      	active: false,
      	name: "Wetlands",
      	layer: L.geoJson(wetlands, {style: wetlandsStyle})
      }
      */
      // ,{
      // 	active: false,
      // 	name: "911 Address Points",
      // 	icon: '<i class="icon icon-parking"></i>',
      // 	layer: L.geoJson(addresspts, {style: addressptsStyle, onEachFeature: onEachAddressFeature})
      // }
      /*
      ,{
      	active: false,
      	name: "Buildings",
      	layer: L.geoJson(buildings, {style: buildingsStyle})
      }
    ];
    */
    //var layerControl = new L.Control.PanelLayers(baseLayers, overLayers);
    
    var layerControl = new L.Control.PanelLayers(baseLayers);
    map.addControl(layerControl);
    

    //--end map-tiles
    //--custom icons--//
    var theIcon = L.Icon.extend({
      options: {
        //   shadowUrl: 'leaf-shadow.png',
        iconSize: [32, 37], // size of the icon
        //   shadowSize:   [50, 64], // size of the shadow
        iconAnchor: [16, 35], // point of the icon which will correspond to marker's location
        //  shadowAnchor: [4, 62],  // the same for the shadow
        popupAnchor: [0, -32] // point from which the popup should open relative to the iconAnchor
      }
    });
    //--//
    //--End map-tiles.js--//

    var customZoom = L.control.zoom({ position: 'topright' }).addTo(map);
    /* _includes/map-toolbar.js */
    //console.log('start map toolbar');

    var theMarker = L.icon({
      iconUrl: 'assets/images/map-marker.png',
      //shadowUrl: 'leaf-shadow.png',
      iconSize: [48, 48], // size of the icon
      //shadowSize:   [50, 64], // size of the shadow
      iconAnchor: [24, 42], // point of the icon which will correspond to marker's location - half the width and height of icon
      //shadowAnchor: [4, 62],  // the same for the shadow
      popupAnchor: [0, -42] // point from which the popup should open relative to the iconAnchor
    });
    //end marker

    var overlays;
    var sidebar = L.control.sidebar('sidebar', { autoPan: false, closeButton: false });
    sidebar.addTo(map);
    
    

    //Toggle OSM Search and Feature Search - remove if no feature search
    //var hash = L.hash(map);
    var gpsLocate = L.control.locate({ follow: true, locateOptions: { enableHighAccuracy: true } });
    //gpsLocate.addTo(map);
    var homeExtent = L.control.defaultExtent({});
    //homeExtent.addTo(map);
    var fullscreen = L.control.fullscreen();
/*
    var globalsearchToggle = new L.easyButton({
      states: [{
        stateName: 'show',
        icon: 'fa-exchange fa-lg',
        title: 'Search Addresses',
        onClick: function (btn, map) {
          addrsearch.addTo(map);
          btn.state('hide');
        }
      }, {
        stateName: 'hide',
        icon: 'fa-exchange fa-border fa-lg',
        title: 'Search Features',
        onClick: function (btn, map) {
          map.removeControl(addrsearch);
          btn.state('show');
        }
      }]
    });
    globalsearchToggle.addTo(map);
*/
    var loading = L.Control.loading({ position: 'topright' }).addTo(map);
    var sidebarToggle = L.easyButton({
      states: [{
        stateName: 'open-sidebar',      // name the state
        icon: 'fa-bars fa-lg',          // and define it's properties
        title: 'Show Sidebar',          // like it's title
        onClick: function (btn, map) {  // and it's callback
          sidebar.show();
          btn.state('close-sidebar');   // change state on click!
        }
      }, {
        stateName: 'close-sidebar',
        icon: 'fa-times fa-2x',
        title: 'Hide Sidebar',
        onClick: function (btn, map) {
          sidebar.hide();
          btn.state('open-sidebar');
        }
      }],
      id: 'menu',
    });
    var stogglebar = L.easyBar([sidebarToggle], { id: 'toggle' }).addTo(map);
    //var leafletprint = L.easyPrint();//
    //end toolbar
    sidebar.on('hide', function () {
      sidebarToggle.state('open-sidebar');
    });
    sidebar.on('show', function () {
      sidebarToggle.state('close-sidebar');
    });
    //mobile toolbar menu
    //--tools toggle on small screens
    var toolshidden = false;
    var mobilescreen = false;
    var tools = L.easyButton({
      states: [{
        stateName: 'show-tools',   // name the state
        icon: 'fa-cogs fa-lg',          // and define it's properties
        title: 'Show Map Tools', // like it's title
        onClick: function (btn, map) {  // and it's callback
          leafletprint.addTo(map);
          gpsLocate.addTo(map);
          homeExtent.addTo(map);
          fullscreen.addTo(map);
          globalsearchToggle.addTo(map);
          btn.state('hide-tools'); // change state on click!
          toolshidden = false;
          //console.log(toolshidden + ' state changed to hideTools');
        }
      }, {
        stateName: 'hide-tools',
        icon: 'fa-cogs fa-border fa-lg',
        title: 'Hide Map Tools',
        onClick: function (btn, map) {
          //map.removeControl(leafletprint);
          map.removeControl(gpsLocate);
          map.removeControl(homeExtent);
          map.removeControl(fullscreen);
          map.removeControl(globalsearchToggle);
          btn.state('show-tools');
          toolshidden = true;
          //console.log(toolshidden+ ' state changed to showTools');
        }
      }],
      id: 'tools',
    });

    var w = window.innerWidth;

    if (w < 481) {
      tools.addTo(map);
      toolshidden = true;
      mobilescreen = true;
      //console.log('mobile tool toggle');
      //console.log(toolshidden + "mobilescreen: " + mobilescreen);
    } else {
      //leafletprint.addTo(map);
      gpsLocate.addTo(map);
      homeExtent.addTo(map);
      fullscreen.addTo(map);
      toolshidden = false;
      //console.log(toolshidden + " " + mobilescreen);
    }
    window.onresize = function () {
      if (toolshidden === true && window.innerWidth > 480 && mobilescreen === true) {
        //leafletprint.addTo(map);
        gpsLocate.addTo(map);
        homeExtent.addTo(map);
        fullscreen.addTo(map);

        map.removeControl(tools);
        toolshidden = false;
        mobilescreen = false;
        //console.log(toolshidden + " " + mobilescreen);
      }
      else if (toolshidden === false && mobilescreen === true && window.innerWidth > 481) {
        tools.state('show-tools');
        mobilescreen = false;
        map.removeControl(tools);
        //console.log(toolshidden + "" + mobilescreen);
      }
      else if (toolshidden === false && window.innerWidth < 481 && mobilescreen === false) {
        //map.removeControl(leafletprint);
        map.removeControl(gpsLocate);
        map.removeControl(homeExtent);
        map.removeControl(fullscreen);
        map.removeControl(globalsearchToggle);
        tools.addTo(map);
        toolshidden = true;
        mobilescreen = true;
      }
      else { }
    };
    //--end tools toggle

    map.on('baselayerchange', function () {
      if (L.Browser.mobile) {
        map.on('baselayerchange', function () {
          setTimeout(function () {
            $(".leaflet-control-layers").removeClass("leaflet-control-layers-expanded");
          }, 5000);
        });
      }
    });

    map.spin(true);
// map stuff 
    //map.fitBounds(bounds);
    $(".blank").fadeOut();
    map.spin(false);
    setTimeout(function () { sidebar.show() }, 500);




  </script>
  <script src="https://d3js.org/d3.v5.min.js"></script>
  <script src="https://unpkg.com/leaflet.vectorgrid@latest/dist/Leaflet.VectorGrid.bundled.js"></script>
  <script src="assets/js/map-app-vectorgrid2.js"></script>
  <!--End Map Post Content-->
  <!--_includes/footer.html-->
</body>
<footer>

  <!-- Modal -->
  <div class="modal fade" id="introModal" role="dialog">
    <div class="modal-dialog">

      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h2 class="modal-title">Leaflet & Vector Tiles</h2>
        </div>
        <div class="modal-body">
          Scott Township, Lackawanna County, Pa.
        </div>
        <div class="modal-footer">
          <span id="loadingMessage" class="animate-flicker" style="float:left;color:red;"></span>
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        </div>
      </div>

    </div>
  </div>

</footer>

</html>