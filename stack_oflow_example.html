<!DOCTYPE html>
<html>
<head>

	<title>VectorGrid.Protobuf example</title>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="https://unpkg.com/leaflet@1.0.3/dist/leaflet.css" />

</head>
<body style='margin:0'>

	<div id="map" style="width: 100vw; height: 100vh; background: white"></div>
	
	<script type="text/javascript"  src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js"></script>
	<script type="text/javascript"  src="https://unpkg.com/leaflet.vectorgrid@1.2.0"></script>
	<!-- <script type="text/javascript" src="../dist/Leaflet.VectorGrid.bundled.js"></script> -->
	<script>
var map = L.map('map');

        var canvasRenderer = L.canvas();

        var cartodbAttribution = '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, &copy; <a href="http://cartodb.com/attributions">CartoDB</a>';

        var positron =L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=token', {
            maxZoom: 18,
            attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, ' +
                '<a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
                'Imagery Â© <a href="http://mapbox.com">Mapbox</a>',
            id: 'mapbox.streets'
        }).addTo(map);

        function getColor(d) {


               if(d==10 || d==9 || d==8){
                   return '#ff0000';
               }

               else {

                   return '#00ff65';

               }

        } 

        var highlight;
        var clearHighlight = function() {
            if (highlight) {
                vectorGrid.resetFeatureStyle(highlight);
            }
            highlight = null;
        };
        var vectorGrid = L.vectorGrid.slicer(lines, {
            rendererFactory: L.svg.tile,
            vectorTileLayerStyles: {
                sliced: function(properties, zoom) {

                    return {

                        weight: 2,
                        opacity: 1,

                        color: getColor(properties.points),


                        fillOpacity: 0.7
                    }
                }
            },
            interactive: true,
            getFeatureId: function(f) {
                return f.properties.id;
            }
        })
        .on('mouseover', function(e) {
            var properties = e.layer.properties;
            L.popup()
                .setContent(properties.id)
                .setLatLng(e.latlng)
                .openOn(map);

            clearHighlight();
            highlight = properties.id;

            var p = properties.points;
            var style = {
                fillColor: p === 0 ? '#800026' :
                        p === 1 ? '#E31A1C' :
                        p === 2 ? '#FEB24C' :
                        p === 3 ? '#B2FE4C' : '#FFEDA0',
                fillOpacity: 0.5,
                fillOpacity: 1,
                stroke: true,
                fill: true,
                color: 'red',
                opacity: 1,
                weight: 2,
            };

            vectorGrid.setFeatureStyle(properties.points, style);
        })
        .addTo(map);

        map.on('click', clearHighlight);

        map.setView({ lat: 36.447488, lng: 102.463303}, 12);
	</script>
</body>
</html>

